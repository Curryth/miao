<div class="dragable" style="width:100px;height:100px;left:0;top:40px;background-color: #e3783b;">
    <span class="win-title">BlackPinkğŸ‘‘</span>
    <span>RosÃ©</span>
    <span class="win-resize"></span>
</div>
<div class="dragable" style="width:100px;height:100px;left:0;top:40px;background-color: gold;">
    <span class="win-title">BlackPinkğŸ‘‘</span>
    <span>Jennie</span>
    <span class="win-resize"></span>
</div>
<div class="dragable" style="width:100px;height:100px;left:0;top:40px;;background-color: aquamarine;">
    <span class="win-title">BlackPinkğŸ‘‘</span>
    <span>Jisoo</span>
    <span class="win-resize"></span>
</div>
<div class="dragable" style="width:100px;height:100px;left:0;top:40px;background-color: violet;">
    <span class="win-title">BlackPinkğŸ‘‘</span>
    <span>Lisa</span>
    <span class="win-resize"></span>
</div>

<p>
                     è¦æ‹–æ‹½BlackPinkğŸ‘‘æ‰èƒ½æ‹–æ‹½æ–¹å—å“¦
</p>
<style>    
    html {
        user-select: none;
    }
    .dragable {
        width: 100px;
        height: 100px;
        border: 2px solid;
        position: fixed;
        /* resize: both;
        overflow: auto; */
    }
    .dragable .win-title {
        display: block;
        background-color: pink;
        color: white;
        font-weight: bold;
        cursor: move;
    }
    .dragable .win-resize {
        position: absolute;
        width: 5px;
        height: 5px;
        background-color: black;
        bottom: 0;
        right: 0;
        margin-right: -2px;
        margin-bottom: -2px;
        cursor: nwse-resize;
    }

</style>


<script>

    var startX    // ç‚¹å‡»å‘ç”Ÿæ—¶é¼ æ ‡çš„åˆå§‹ä½ç½®
    var startY    

    var nodeX    // ç‚¹å‡»å‘ç”Ÿæ—¶ï¼Œå…ƒç´ çš„åˆå§‹ä½ç½® 
    var nodeY

    var nodeWidth
    var nodeHeight

    var state = ''   // 

    var movingNode
    var resizingNode
    var maxZindex = 4

    // ç›´æ¥ç”¨äº‹ä»¶ä»£ç†ï¼Œæ§åˆ¶æ‰€æœ‰æ–¹å—
    document.addEventListener('mousedown', e => {            // åŒ¹é…åˆ°dragableé‡Œé¢çš„å…ƒç´ ï¼Œä¸åŒ…æ‹¬dragableæœ¬èº«
        console.log(e.target)
        
        var æ ‡é¢˜æ  = e.target.closest('.win-title')  
        
        startX = e.clientX
        startY = e.clientY

        if (æ ‡é¢˜æ ) {               // åªæœ‰ç‚¹å‡»æ ‡é¢˜æ æ‰å¯ä»¥æ‹–æ‹½çª—å£
            state = 'moving'
            movingNode = æ ‡é¢˜æ .closest('.dragable')   //  å½“å‰å¯ç§»åŠ¨çš„çª—å£

            nodeX = parseInt(movingNode.style.left)
            nodeY = parseInt(movingNode.style.top)
            window.addEventListener('mousemove', move)
        }
        
        // å¦‚æœç‚¹çš„æ˜¯resizeæŒ‰é’®
        if (e.target.matches('.win-resize')) {
            state = 'resizing'
            resizingNode = e.target.closest('.dragable')
            nodeWidth = parseInt(resizingNode.style.width)  // è¿™é‡Œä¸è¦åŠ pxå˜›ï¼Ÿä¸æ‡‚
            nodeHeight = parseInt(resizingNode.style.height) 
            window.addEventListener('mousemove', move)
        }

        if (e.target.closest('.dragable')) {   // åªè¦ç‚¹å‡»äº†çª—å£ï¼ŒzIndexå°±ä¼š++
            e.target.closest('.dragable').style.zIndex = maxZindex++
        }


    })

    function move(e) {   
        // console.log('mousemove')  
        if (e.which == 0) {
            window.removeEventListener('mousemove', move)
        }
        if (state == 'moving') {
            var dx = e.clientX - startX   // è¿™æ¬¡çš„ä½ç½®å‡å»ä¸Šä¸€æ¬¡çš„ä½ç½®ï¼Œå³ä¸ºç§»åŠ¨çš„è·ç¦»
            var dy = e.clientY - startY

            var left = nodeX + dx
            var top = nodeY + dy
            
            var çª—å£è‡ªåŠ¨è´´åˆè·ç¦» = 100
            if (left < çª—å£è‡ªåŠ¨è´´åˆè·ç¦») {    // è¿™æ ·æ–¹å—å°±ä¸ä¼šç§»å‡ºçª—å£ // ç£æ€§çª—å£çš„å®ç°ï¼Œleftåˆ°æŸä¸ªèŒƒå›´ï¼Œç›´æ¥ç­‰äº0å°±è¡Œ
                left = 0
            }

            if (top < çª—å£è‡ªåŠ¨è´´åˆè·ç¦») {
                top = 0
            }
            if (left > innerWidth - movingNode.offsetWidth - çª—å£è‡ªåŠ¨è´´åˆè·ç¦») {    // è¿™æ ·æ–¹å—ä¸ä¼šç§»åŠ¨åˆ°æ“ä½œå°åŒºåŸŸå»
                left = innerWidth - movingNode.offsetWidth
            }
            if (top > innerHeight - movingNode.offsetHeight - çª—å£è‡ªåŠ¨è´´åˆè·ç¦») {
                top = innerHeight - movingNode.offsetHeight
            }
            movingNode.style.left = left  + 'px'   // ç§»åŠ¨é¼ æ ‡åï¼Œç›®æ ‡æ–¹å—çš„ä½ç½®éšä¹‹ç§»åŠ¨
            movingNode.style.top = top + 'px'
            // å¦‚æœè¿™é‡Œè®¾ç½®ä¸ºe.target
        }

        if (state == 'resizing') {
            var dx = e.clientX - startX
            var dy = e.clientY - startY

            console.log(dx, dy)

            resizingNode.style.width = nodeWidth + dx + 'px'
            resizingNode.style.height = nodeHeight+ dy + 'px'
        }

    }

// æ‹–æ‹½
// é‡ç½®å¤§å°
// ç£è´´æ•ˆæœ
</script>